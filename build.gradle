plugins {
    id "org.jetbrains.kotlin.jvm" version "1.2.60"
    id "org.jetbrains.intellij" version "0.3.9"
}

apply plugin: "kotlin"
apply plugin: 'org.jetbrains.intellij'

intellij {
    version ideaVersion
    pluginName name
    plugins 'JavaScriptLanguage', 'CSS'
}

patchPluginXml {
    sinceBuild "173"
}

repositories {
    mavenCentral()
}

prepareSandbox {
    from('src/main/resources/intellij_reporter.js') {
        into "${intellij.pluginName}/lib/"
    }
}

publishPlugin {
    def publishPassword = "$System.env.publishPassword"
    username publishUsername
    password publishPassword
    channels publishChannels
}